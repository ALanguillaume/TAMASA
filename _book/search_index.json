[
["manual-latin-hypercube-sampling.html", "5 Manual Latin Hypercube Sampling 5.1 Using the TAMASA lhc kit. 5.2 Recap table", " 5 Manual Latin Hypercube Sampling This last section describes how to use the TAMASA tool kit to perform Latin Hypercube sampling. 5.1 Using the TAMASA lhc kit. Make sure you have the required packages installed: packages &lt;- c(&quot;lhs&quot;,&quot;ggplot2&quot;, &quot;purrr&quot;, &quot;dplyr&quot;, &quot;here&quot;, &quot;stringr&quot;, &quot;tidyr&quot;, &quot;tibble&quot;, &quot;ggbeeswarm&quot;, &quot;ggpubr&quot;) install.packages(packages, dependencies = TRUE) First source the TAMASA_.*_lhc functions into memory. You donâ€™t have to bother about loading the require packages using library, it will be done in the background for you. source(&quot;./scripts/TAMASA_lhc.R&quot;) 5.1.1 TAMASA_prepare_lhc() The firs step is, to prepare a reference data.frame containing the values to feed to the lhc sampling function and some useful information. (vars_df &lt;- TAMASA_prepare_lhc()) ## # A tibble: 23 x 6 ## param values count mean sd lhc_bin ## &lt;chr&gt; &lt;named list&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; ## 1 seedprice_hybrid &lt;dbl [35]&gt; 35 5637. 1333. 1 ## 2 seedprice_local &lt;dbl [2]&gt; 2 1500 707. 0 ## 3 price_Urea &lt;int [3]&gt; 3 1060 52.9 0 ## 4 price_CAN &lt;int [7]&gt; 7 1063. 125. 1 ## 5 price_DAP &lt;int [13]&gt; 13 1425. 169. 1 ## 6 price_pesticide &lt;int [10]&gt; 10 18378 11588. 1 ## 7 price_fungicide &lt;int [5]&gt; 5 34032 14757. 0 ## 8 price_herbicide &lt;int [10]&gt; 10 13180 4621. 1 ## 9 N_price &lt;dbl [46]&gt; 46 5886. 2411. 1 ## 10 P_price &lt;dbl [27]&gt; 27 9953. 3397. 1 ## # ... with 13 more rows It contains the following columns: param: character, variable name. values: list column with all values. count: numeric, number of data points per variable. mean: numeric, average value. sd: numeric, standard deviation. lhc_bin: integer, indicating if lhc sampling should be perform for this variable (1) or not (0). If the number of data points (count) is less than 5, lhc_bin will be equal to 0. In that case, the exisiting data points will just be randomly sampled n times. 5.1.2 TAMASA_sample_lhc() Once vars_df has been prepared, TAMASA_sample_lhc can be called to actually perform the lhc sampling. The argument n simply specifies the number of data points to be sampled from the underlying gamma distributions. sampled_data &lt;- TAMASA_sample_lhc(vars_df, n = 100) 5.1.3 TAMASA_plot_lhc() The sampled data can be checked as such. The grey data points correspond to the sampled data while the plain red onec represent the real data. The horizontal red line is the real data average. TAMASA_plot_lhc(vars_df, sampled_data) 5.1.4 Use that in code Upon integrating that code into a broader simulation scheme, you might want to store the data.frame harbouring the sampled data for each run. Below, a simple way to do that using a list. vars_df &lt;- TAMASA_prepare_lhc() N_sim &lt;- 100 l_sampled_data &lt;- as.list(rep(NA, N_sim)) for(i in 1:N_sim){ l_sampled_data[[i]] &lt;- TAMASA_sample_lhc(vars_df, n = 100) ## Here plug in Paul&#39;s code } 5.2 Recap table The table below summarizes all the variable extracted from the TAMASA APS 2017 survey for which latin hypercube sampling is performed. From Section Variable Description Unit Type community_NPK N_price price at peak demand (aug-dec) of Nitrogen \\(Tsh.kg^{-1}\\) integer community_NPK P_price price at peak demand (aug-dec) of Phosphorus \\(Tsh.kg^{-1}\\) integer community price_pesticide price at peak demand (aug-dec) for different inputs. \\(Tsh.kg^{-1}\\) integer community price_herbicide Calculated as: \\(Tsh.kg^{-1}\\) integer community price_fungicide (Price / amount converted to kg) + transp_price \\(Tsh.kg^{-1}\\) integer community price_DAP - \\(Tsh.kg^{-1}\\) integer community price_CAN - \\(Tsh.kg^{-1}\\) integer community price_Urea - \\(Tsh.kg^{-1}\\) integer focalplot seedprice_hybrid seed price for hybrid (improved) varieties \\(Tsh.kg^{-1}\\) integer focalplot seedprice_local seed price for local (improved) varieties \\(Tsh.kg^{-1}\\) integer household tlab_h_ha total labour - harvesting \\(work \\, day.ha{-1}\\) double household tlab_l_ha total labour - land preparation \\(work \\, day.ha{-1}\\) double household tlab_p_ha total labour - planting \\(work \\, day.ha{-1}\\) double household tlab_r_ha total labour - fertilizing \\(work \\, day.ha{-1}\\) double household tlab_w_ha total labour - weeding \\(work \\, day.ha{-1}\\) double household tlab_h_dt total labour - harvesting in work days per ton \\(work \\, day.ton{-1}\\) double "]
]
