<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Community survey | TAMASA APS survey</title>
  <meta name="description" content="This document presents the whole data cleaning workflow use for Hijbeek et al. 2019" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Community survey | TAMASA APS survey" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This document presents the whole data cleaning workflow use for Hijbeek et al. 2019" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Community survey | TAMASA APS survey" />
  
  <meta name="twitter:description" content="This document presents the whole data cleaning workflow use for Hijbeek et al. 2019" />
  

<meta name="author" content="Antoine Languillaume" />


<meta name="date" content="2020-08-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="focal-plot-survey.html"/>
<link rel="next" href="manual-latin-hypercube-sampling.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="household-survey.html"><a href="household-survey.html"><i class="fa fa-check"></i><b>2</b> Household survey</a>
<ul>
<li class="chapter" data-level="2.1" data-path="household-survey.html"><a href="household-survey.html#intervening-datasets"><i class="fa fa-check"></i><b>2.1</b> Intervening datasets</a></li>
<li class="chapter" data-level="2.2" data-path="household-survey.html"><a href="household-survey.html#main-household-dataset"><i class="fa fa-check"></i><b>2.2</b> Main household dataset</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="household-survey.html"><a href="household-survey.html#growing-seasons"><i class="fa fa-check"></i><b>2.2.1</b> Growing Seasons</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="household-survey.html"><a href="household-survey.html#buying-prices-maize-at-nearest-local-market"><i class="fa fa-check"></i><b>2.3</b> Buying prices maize at nearest local market</a></li>
<li class="chapter" data-level="2.4" data-path="household-survey.html"><a href="household-survey.html#plot-data"><i class="fa fa-check"></i><b>2.4</b> Plot data</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="household-survey.html"><a href="household-survey.html#plots-area-in-hectares"><i class="fa fa-check"></i><b>2.4.1</b> Plots area in hectares</a></li>
<li class="chapter" data-level="2.4.2" data-path="household-survey.html"><a href="household-survey.html#define-cropping-systems"><i class="fa fa-check"></i><b>2.4.2</b> Define cropping systems</a></li>
<li class="chapter" data-level="2.4.3" data-path="household-survey.html"><a href="household-survey.html#intermezzo-was-harvest-finished-at-enumeration-date"><i class="fa fa-check"></i><b>2.4.3</b> Intermezzo: was harvest finished at enumeration date ?</a></li>
<li class="chapter" data-level="2.4.4" data-path="household-survey.html"><a href="household-survey.html#calculate-yield"><i class="fa fa-check"></i><b>2.4.4</b> Calculate yield</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="household-survey.html"><a href="household-survey.html#labour-in-main-season-only"><i class="fa fa-check"></i><b>2.5</b> Labour (in Main season only)</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="household-survey.html"><a href="household-survey.html#combine-cropping-sytems-and-labour-data"><i class="fa fa-check"></i><b>2.5.1</b> Combine cropping sytems and labour data</a></li>
<li class="chapter" data-level="2.5.2" data-path="household-survey.html"><a href="household-survey.html#aggregate-over-labour-category"><i class="fa fa-check"></i><b>2.5.2</b> Aggregate over labour category:</a></li>
<li class="chapter" data-level="2.5.3" data-path="household-survey.html"><a href="household-survey.html#calculate-labour-and-wages-per-hectare"><i class="fa fa-check"></i><b>2.5.3</b> Calculate labour and wages per hectare</a></li>
<li class="chapter" data-level="2.5.4" data-path="household-survey.html"><a href="household-survey.html#total-labour-input-per-ha"><i class="fa fa-check"></i><b>2.5.4</b> Total labour input per ha</a></li>
<li class="chapter" data-level="2.5.5" data-path="household-survey.html"><a href="household-survey.html#harvest-labour-in-work-days.t-1"><i class="fa fa-check"></i><b>2.5.5</b> Harvest labour in <span class="math inline">\(work \, days.t^{-1}\)</span></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="household-survey.html"><a href="household-survey.html#sales"><i class="fa fa-check"></i><b>2.6</b> Sales</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="household-survey.html"><a href="household-survey.html#relevant-crop-sales-variables"><i class="fa fa-check"></i><b>2.6.1</b> Relevant Crop sales variables:</a></li>
<li class="chapter" data-level="2.6.2" data-path="household-survey.html"><a href="household-survey.html#calculate-per-kg"><i class="fa fa-check"></i><b>2.6.2</b> Calculate per kg</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="household-survey.html"><a href="household-survey.html#merge"><i class="fa fa-check"></i><b>2.7</b> Merge</a></li>
<li class="chapter" data-level="2.8" data-path="household-survey.html"><a href="household-survey.html#recap"><i class="fa fa-check"></i><b>2.8</b> Recap</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html"><i class="fa fa-check"></i><b>3</b> Focal plot survey</a>
<ul>
<li class="chapter" data-level="3.1" data-path="household-survey.html"><a href="household-survey.html#intervening-datasets"><i class="fa fa-check"></i><b>3.1</b> Intervening datasets</a></li>
<li class="chapter" data-level="3.2" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#prepare-dataset"><i class="fa fa-check"></i><b>3.2</b> Prepare dataset</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#select-useful-columns"><i class="fa fa-check"></i><b>3.2.1</b> Select useful columns</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#plot-area-validation"><i class="fa fa-check"></i><b>3.3</b> Plot area validation</a></li>
<li class="chapter" data-level="3.4" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#seeds"><i class="fa fa-check"></i><b>3.4</b> Seeds</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#seed-amounts"><i class="fa fa-check"></i><b>3.4.1</b> Seed Amounts</a></li>
<li class="chapter" data-level="3.4.2" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#seed-costs"><i class="fa fa-check"></i><b>3.4.2</b> Seed costs</a></li>
<li class="chapter" data-level="3.4.3" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#hybrid-vs-local"><i class="fa fa-check"></i><b>3.4.3</b> Hybrid vs local</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#pigeon-pea"><i class="fa fa-check"></i><b>3.5</b> Pigeon Pea</a></li>
<li class="chapter" data-level="3.6" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#fertilizer"><i class="fa fa-check"></i><b>3.6</b> Fertilizer</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#select-variables"><i class="fa fa-check"></i><b>3.6.1</b> Select variables</a></li>
<li class="chapter" data-level="3.6.2" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#calculate-npk-input-from-input-type-and-amount"><i class="fa fa-check"></i><b>3.6.2</b> Calculate NPK input from input type and amount</a></li>
<li class="chapter" data-level="3.6.3" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#calculate-additional-inputs"><i class="fa fa-check"></i><b>3.6.3</b> Calculate additional inputs</a></li>
<li class="chapter" data-level="3.6.4" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#combine-input-types"><i class="fa fa-check"></i><b>3.6.4</b> Combine input types</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#cost-of-hiring-power-sources"><i class="fa fa-check"></i><b>3.7</b> Cost of hiring power sources</a></li>
<li class="chapter" data-level="3.8" data-path="household-survey.html"><a href="household-survey.html#merge"><i class="fa fa-check"></i><b>3.8</b> Merge</a></li>
<li class="chapter" data-level="3.9" data-path="household-survey.html"><a href="household-survey.html#recap"><i class="fa fa-check"></i><b>3.9</b> Recap</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="community-survey.html"><a href="community-survey.html"><i class="fa fa-check"></i><b>4</b> Community survey</a>
<ul>
<li class="chapter" data-level="4.1" data-path="household-survey.html"><a href="household-survey.html#intervening-datasets"><i class="fa fa-check"></i><b>4.1</b> Intervening datasets</a></li>
<li class="chapter" data-level="4.2" data-path="focal-plot-survey.html"><a href="focal-plot-survey.html#prepare-dataset"><i class="fa fa-check"></i><b>4.2</b> Prepare dataset</a></li>
<li class="chapter" data-level="4.3" data-path="community-survey.html"><a href="community-survey.html#maize-buying-prices"><i class="fa fa-check"></i><b>4.3</b> Maize buying prices</a></li>
<li class="chapter" data-level="4.4" data-path="community-survey.html"><a href="community-survey.html#fertilizer-prices"><i class="fa fa-check"></i><b>4.4</b> Fertilizer prices</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="community-survey.html"><a href="community-survey.html#selected-variables"><i class="fa fa-check"></i><b>4.4.1</b> Selected variables</a></li>
<li class="chapter" data-level="4.4.2" data-path="community-survey.html"><a href="community-survey.html#subset-main-community-data.frame"><i class="fa fa-check"></i><b>4.4.2</b> Subset main community data.frame</a></li>
<li class="chapter" data-level="4.4.3" data-path="community-survey.html"><a href="community-survey.html#calculate-price-in-tshkg-for-each-fertilizer"><i class="fa fa-check"></i><b>4.4.3</b> Calculate price in Tsh/kg for each fertilizer</a></li>
<li class="chapter" data-level="4.4.4" data-path="community-survey.html"><a href="community-survey.html#price-of-n-p-and-k-in-tsh.kg-1"><i class="fa fa-check"></i><b>4.4.4</b> Price of N, P and K in <span class="math inline">\(Tsh.kg^{-1}\)</span></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="community-survey.html"><a href="community-survey.html#labour-cost"><i class="fa fa-check"></i><b>4.5</b> Labour cost</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="community-survey.html"><a href="community-survey.html#subset-main-community-data.frame-1"><i class="fa fa-check"></i><b>4.5.1</b> Subset main community data.frame</a></li>
<li class="chapter" data-level="4.5.2" data-path="community-survey.html"><a href="community-survey.html#visual-exploration-1"><i class="fa fa-check"></i><b>4.5.2</b> Visual exploration</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="household-survey.html"><a href="household-survey.html#merge"><i class="fa fa-check"></i><b>4.6</b> Merge</a></li>
<li class="chapter" data-level="4.7" data-path="household-survey.html"><a href="household-survey.html#recap"><i class="fa fa-check"></i><b>4.7</b> Recap</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="community-survey.html"><a href="community-survey.html#community-general-dataset"><i class="fa fa-check"></i><b>4.7.1</b> Community general dataset</a></li>
<li class="chapter" data-level="4.7.2" data-path="community-survey.html"><a href="community-survey.html#fertilizer-isotope-prices"><i class="fa fa-check"></i><b>4.7.2</b> Fertilizer isotope prices</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manual-latin-hypercube-sampling.html"><a href="manual-latin-hypercube-sampling.html"><i class="fa fa-check"></i><b>5</b> Manual Latin Hypercube Sampling</a>
<ul>
<li class="chapter" data-level="5.1" data-path="manual-latin-hypercube-sampling.html"><a href="manual-latin-hypercube-sampling.html#required-packages"><i class="fa fa-check"></i><b>5.1</b> Required packages</a></li>
<li class="chapter" data-level="5.2" data-path="manual-latin-hypercube-sampling.html"><a href="manual-latin-hypercube-sampling.html#using-the-tamasa-lhc-kit"><i class="fa fa-check"></i><b>5.2</b> Using the TAMASA lhc kit</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="manual-latin-hypercube-sampling.html"><a href="manual-latin-hypercube-sampling.html#tamasa_prepare_lhc"><i class="fa fa-check"></i><b>5.2.1</b> TAMASA_prepare_lhc()</a></li>
<li class="chapter" data-level="5.2.2" data-path="manual-latin-hypercube-sampling.html"><a href="manual-latin-hypercube-sampling.html#tamasa_sample_lhc"><i class="fa fa-check"></i><b>5.2.2</b> TAMASA_sample_lhc()</a></li>
<li class="chapter" data-level="5.2.3" data-path="manual-latin-hypercube-sampling.html"><a href="manual-latin-hypercube-sampling.html#tamasa_plot_lhc"><i class="fa fa-check"></i><b>5.2.3</b> TAMASA_plot_lhc()</a></li>
<li class="chapter" data-level="5.2.4" data-path="manual-latin-hypercube-sampling.html"><a href="manual-latin-hypercube-sampling.html#use-that-in-code"><i class="fa fa-check"></i><b>5.2.4</b> Use that in code</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="manual-latin-hypercube-sampling.html"><a href="manual-latin-hypercube-sampling.html#recap-table"><i class="fa fa-check"></i><b>5.3</b> Recap table</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">TAMASA APS survey</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="community-survey" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Community survey</h1>
<p>Mainly contains information about access to services, field-labour price, seed and input prices.</p>
<div id="intervening-datasets" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Intervening datasets</h2>
<table>
<thead>
<tr class="header">
<th align="left">Description</th>
<th align="left">File</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Community main file</td>
<td align="left">TZAPS17_cmty.tab</td>
</tr>
<tr class="even">
<td align="left">Community metadata</td>
<td align="left">TZAPS17_ODK_community.xlsx</td>
</tr>
</tbody>
</table>
</div>
<div id="prepare-dataset" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Prepare dataset</h2>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="community-survey.html#cb163-1"></a>cmty &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="kw">here</span>(<span class="st">&quot;./data/TAMASA2017/TZAPS17_cmty.tab&quot;</span>),</span>
<span id="cb163-2"><a href="community-survey.html#cb163-2"></a>                   <span class="dt">header =</span> <span class="ot">TRUE</span>,</span>
<span id="cb163-3"><a href="community-survey.html#cb163-3"></a>                   <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>,</span>
<span id="cb163-4"><a href="community-survey.html#cb163-4"></a>                   <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="community-survey.html#cb164-1"></a>cmty<span class="op">$</span>village[cmty<span class="op">$</span>village <span class="op">==</span><span class="st"> &quot;OTHER&quot;</span>] &lt;-<span class="st"> </span>cmty<span class="op">$</span>village_alt[cmty<span class="op">$</span>village <span class="op">==</span><span class="st"> &quot;OTHER&quot;</span>]</span>
<span id="cb164-2"><a href="community-survey.html#cb164-2"></a>cmty<span class="op">$</span>hamlet[cmty<span class="op">$</span>hamlet <span class="op">==</span><span class="st"> &quot;OTHER&quot;</span>] &lt;-<span class="st"> </span>cmty<span class="op">$</span>hamlet_alt[cmty<span class="op">$</span>hamlet <span class="op">==</span><span class="st"> &quot;OTHER&quot;</span>]</span></code></pre></div>
<p>Set zone and region as factors with legible levels</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="community-survey.html#cb165-1"></a>md_geo &lt;-<span class="st"> </span>readxl<span class="op">::</span><span class="kw">read_xlsx</span>(<span class="kw">here</span>(<span class="st">&quot;./data/TAMASA2017/metadata/TZAPS17_ODK_community.xlsx&quot;</span>),</span>
<span id="cb165-2"><a href="community-survey.html#cb165-2"></a>                            <span class="dt">sheet =</span> <span class="st">&quot;external_choices&quot;</span>)</span>
<span id="cb165-3"><a href="community-survey.html#cb165-3"></a>md_region  &lt;-<span class="st"> </span>md_geo <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(list_name <span class="op">==</span><span class="st"> &quot;regions&quot;</span>)</span>
<span id="cb165-4"><a href="community-survey.html#cb165-4"></a>md_district  &lt;-<span class="st"> </span>md_geo <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(list_name <span class="op">==</span><span class="st"> &quot;districts&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="community-survey.html#cb166-1"></a>cmty<span class="op">$</span>zone &lt;-<span class="st"> </span><span class="kw">as.factor</span>(cmty<span class="op">$</span>zone)</span>
<span id="cb166-2"><a href="community-survey.html#cb166-2"></a>cmty<span class="op">$</span>region &lt;-<span class="st"> </span><span class="kw">factor</span>(cmty<span class="op">$</span>region,</span>
<span id="cb166-3"><a href="community-survey.html#cb166-3"></a>                      <span class="dt">levels =</span> md_region<span class="op">$</span>name,</span>
<span id="cb166-4"><a href="community-survey.html#cb166-4"></a>                      <span class="dt">labels =</span> md_region<span class="op">$</span>label)</span>
<span id="cb166-5"><a href="community-survey.html#cb166-5"></a>cmty<span class="op">$</span>district &lt;-<span class="st"> </span><span class="kw">factor</span>(cmty<span class="op">$</span>district,</span>
<span id="cb166-6"><a href="community-survey.html#cb166-6"></a>                        <span class="dt">levels =</span> md_district<span class="op">$</span>name,</span>
<span id="cb166-7"><a href="community-survey.html#cb166-7"></a>                        <span class="dt">labels =</span> md_district<span class="op">$</span>label)</span></code></pre></div>
<p>Decriptive variables:</p>
<ul>
<li><code>cmty_index</code>: community index, field with only unique values: <code>TRUE</code>.</li>
<li><code>enum_date</code>: date of the survey.</li>
<li><code>zone &gt; region &gt; district &gt; site &gt; ward &gt; village &gt; hamlet</code>: spatial hierachy.</li>
<li><code>comm_gps</code>: community GPS coordinates.</li>
</ul>
<p>Quantitative variables :</p>
<ul>
<li><p><code>vil_nhh</code>: number of households in the village.</p></li>
<li><p><code>vil_npersons</code>: number of persons in the village.</p></li>
<li><p><code>vil_acres</code>: approximate size of the village in acres.</p></li>
<li><p><code>acc_inp_km</code>: distance to input dealer in km.</p></li>
<li><p><code>acc_inp_tsh</code>: cost of transport in Tsh.</p></li>
</ul>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="community-survey.html#cb167-1"></a>cmty_info &lt;-<span class="st"> </span>cmty <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb167-2"><a href="community-survey.html#cb167-2"></a><span class="st">  </span><span class="kw">select</span>(cmty_index, enum_date, zone, region, district, site, ward, village,</span>
<span id="cb167-3"><a href="community-survey.html#cb167-3"></a>         hamlet, comm_gps, vil_nhh, vil_npersons, vil_acres, acc_inp_km, acc_inp_tsh)</span></code></pre></div>
<p>Data is available for <code>68</code> communities threw out the country.</p>
<p>The quantitative variables should be strictly positive. Scan for negative values:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="community-survey.html#cb168-1"></a>(neg_val &lt;-<span class="st"> </span>cmty_info[<span class="kw">map_lgl</span>(cmty_info, is.numeric)] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">any_negative</span>())</span></code></pre></div>
<pre><code>## [1] &quot;vil_npersons&quot; &quot;vil_acres&quot;</code></pre>
<p>and replace existing ones by NA.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="community-survey.html#cb170-1"></a>cmty_info[neg_val] &lt;-<span class="st"> </span><span class="kw">modify</span>(cmty_info[neg_val], <span class="op">~</span><span class="st"> </span><span class="kw">ifelse</span>(.x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, .x))</span></code></pre></div>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="community-survey.html#cb171-1"></a><span class="kw">plot_var</span>(cmty_info, vil_nhh, <span class="dt">plot.unit =</span> <span class="st">&quot;nb of household&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-157-1.png" width="672" /></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="community-survey.html#cb172-1"></a><span class="kw">plot_var_matrix</span>(<span class="dt">df =</span> cmty_info,</span>
<span id="cb172-2"><a href="community-survey.html#cb172-2"></a>                <span class="dt">vars =</span> <span class="kw">c</span>(<span class="st">&quot;vil_nhh&quot;</span>, <span class="st">&quot;vil_npersons&quot;</span>, <span class="st">&quot;vil_acres&quot;</span>),</span>
<span id="cb172-3"><a href="community-survey.html#cb172-3"></a>                <span class="dt">plot.unit =</span> <span class="kw">c</span>(<span class="st">&quot;nb of household&quot;</span>, <span class="st">&quot;nb of persons&quot;</span>, <span class="st">&quot;acres&quot;</span>),</span>
<span id="cb172-4"><a href="community-survey.html#cb172-4"></a>                <span class="dt">plot.dim =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-158-1.png" width="672" /></p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="community-survey.html#cb173-1"></a>cmty_info &lt;-<span class="st"> </span><span class="kw">modify_at</span>(<span class="dt">.x =</span> cmty_info,</span>
<span id="cb173-2"><a href="community-survey.html#cb173-2"></a>                       <span class="dt">.at =</span> <span class="kw">c</span>(<span class="st">&quot;vil_nhh&quot;</span>, <span class="st">&quot;vil_npersons&quot;</span>, <span class="st">&quot;vil_acres&quot;</span>),</span>
<span id="cb173-3"><a href="community-survey.html#cb173-3"></a>                       <span class="dt">.f =</span> outlier_to_NA,</span>
<span id="cb173-4"><a href="community-survey.html#cb173-4"></a>                       <span class="dt">quantile =</span> <span class="fl">0.95</span>)</span></code></pre></div>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="community-survey.html#cb174-1"></a>del_NA &lt;-<span class="st"> </span>cmty_info <span class="op">%&gt;%</span></span>
<span id="cb174-2"><a href="community-survey.html#cb174-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;vil_&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb174-3"><a href="community-survey.html#cb174-3"></a><span class="st">  </span><span class="kw">map</span>(<span class="op">~</span><span class="st"> </span><span class="kw">which</span>(<span class="kw">is.na</span>(.x))) <span class="op">%&gt;%</span></span>
<span id="cb174-4"><a href="community-survey.html#cb174-4"></a><span class="st">  </span><span class="kw">unlist</span>() <span class="op">%&gt;%</span></span>
<span id="cb174-5"><a href="community-survey.html#cb174-5"></a><span class="st">  </span><span class="kw">unique</span>()</span>
<span id="cb174-6"><a href="community-survey.html#cb174-6"></a>cmty_info &lt;-<span class="st"> </span>cmty_info[<span class="op">-</span>del_NA, ]</span></code></pre></div>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="community-survey.html#cb175-1"></a><span class="kw">dim</span>(cmty_info)</span></code></pre></div>
<pre><code>## [1] 46 15</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="community-survey.html#cb177-1"></a><span class="kw">plot_var_matrix</span>(<span class="dt">df =</span> cmty_info,</span>
<span id="cb177-2"><a href="community-survey.html#cb177-2"></a>                <span class="dt">vars =</span> <span class="kw">c</span>(<span class="st">&quot;vil_nhh&quot;</span>, <span class="st">&quot;vil_npersons&quot;</span>, <span class="st">&quot;vil_acres&quot;</span>),</span>
<span id="cb177-3"><a href="community-survey.html#cb177-3"></a>                <span class="dt">plot.unit =</span> <span class="kw">c</span>(<span class="st">&quot;nb of household&quot;</span>, <span class="st">&quot;nb of persons&quot;</span>, <span class="st">&quot;acres&quot;</span>),</span>
<span id="cb177-4"><a href="community-survey.html#cb177-4"></a>                <span class="dt">plot.dim =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-162-1.png" width="672" /></p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="community-survey.html#cb178-1"></a><span class="kw">plot_var_matrix</span>(</span>
<span id="cb178-2"><a href="community-survey.html#cb178-2"></a>  <span class="dt">df =</span> cmty_info,</span>
<span id="cb178-3"><a href="community-survey.html#cb178-3"></a>  <span class="dt">vars =</span> <span class="kw">c</span>(<span class="st">&quot;acc_inp_km&quot;</span>, <span class="st">&quot;acc_inp_tsh&quot;</span>),</span>
<span id="cb178-4"><a href="community-survey.html#cb178-4"></a>  <span class="dt">plot.unit =</span> <span class="kw">c</span>(<span class="st">&quot;km&quot;</span>, <span class="st">&quot;tsh&quot;</span>),</span>
<span id="cb178-5"><a href="community-survey.html#cb178-5"></a>  <span class="dt">plot.dim =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb178-6"><a href="community-survey.html#cb178-6"></a>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-163-1.png" width="672" /></p>
<p>A number of communities are said to be located at a 0 km from an input dealer or to have null input transportation cost. It can be that these communities are indeed located nearby a supplier or most likely that they simply do not use additional inputs.</p>
</div>
<div id="maize-buying-prices" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Maize buying prices</h2>
<p>The community datasets contains a varierty of variables related to maize prize.
Those 9 variables, all prefixed by <code>maiprc</code>, provide the price in Tsh of a 50 kg bag of maize seeds at two possible locations (<code>depot</code> or <code>town</code>) in four different time periods (<code>q1</code>, <code>q2</code>, <code>q3</code> and <code>q4</code>).</p>
<p><strong>Locations:</strong></p>
<p><code>depot</code> refers to a large commercial depot compare to <code>town</code> which is supposed to be the regular market place gor example in the district town.</p>
<p><strong>Time periods:</strong></p>
<table>
<thead>
<tr class="header">
<th>Buying place</th>
<th>Apr-Jun 2016</th>
<th>Jul-Sep 2016</th>
<th>Oct-Dec 2016</th>
<th>Jan-Mar 2017</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>depot</td>
<td>q1</td>
<td>q2</td>
<td>q3</td>
<td>q4</td>
</tr>
<tr class="even">
<td>town</td>
<td>q1</td>
<td>q2</td>
<td>q3</td>
<td>q4</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="community-survey.html#cb179-1"></a>cmty_maiprc &lt;-<span class="st"> </span>cmty <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb179-2"><a href="community-survey.html#cb179-2"></a><span class="st">  </span><span class="kw">select</span>(cmty_index, <span class="kw">starts_with</span>(<span class="st">&quot;maiprc_&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="community-survey.html#cb180-1"></a>maiprc &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">&quot;^maiprc&quot;</span>, <span class="kw">colnames</span>(cmty_maiprc), <span class="dt">value =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>Is there any price variable wiht a negative price ?</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="community-survey.html#cb181-1"></a>cmty_maiprc[, maiprc] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">any_negative</span>()</span></code></pre></div>
<pre><code>## [1] &quot;maiprc_depot_q1&quot; &quot;maiprc_depot_q2&quot; &quot;maiprc_depot_q3&quot; &quot;maiprc_depot_q4&quot;
## [5] &quot;maiprc_town_q1&quot;  &quot;maiprc_town_q2&quot;  &quot;maiprc_town_q3&quot;  &quot;maiprc_town_q4&quot;</code></pre>
<p>Those were the -99 and -98 likely used as NA placeholder. Zeros are also present and will also be replaced by NA as a null price seems none sensical in that context.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="community-survey.html#cb183-1"></a>cmty_maiprc[, maiprc] &lt;-<span class="st"> </span><span class="kw">modify</span>(cmty_maiprc[, maiprc], <span class="op">~</span><span class="st"> </span><span class="kw">ifelse</span>(.x <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, .x))</span></code></pre></div>
<p>Convert price from Tsh/50 kg bag to Tsh/kg</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="community-survey.html#cb184-1"></a>cmty_maiprc[, maiprc] &lt;-<span class="st"> </span>cmty_maiprc[, maiprc] <span class="op">/</span><span class="st"> </span><span class="dv">50</span></span></code></pre></div>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="community-survey.html#cb185-1"></a>plot.unit =<span class="st"> &quot;Tsh/kg&quot;</span></span>
<span id="cb185-2"><a href="community-survey.html#cb185-2"></a>title =<span class="st"> &quot;Maize price&quot;</span></span>
<span id="cb185-3"><a href="community-survey.html#cb185-3"></a>cmty_maiprc <span class="op">%&gt;%</span></span>
<span id="cb185-4"><a href="community-survey.html#cb185-4"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">all_of</span>(maiprc),</span>
<span id="cb185-5"><a href="community-survey.html#cb185-5"></a>               <span class="dt">names_to =</span> <span class="st">&quot;category&quot;</span>,</span>
<span id="cb185-6"><a href="community-survey.html#cb185-6"></a>               <span class="dt">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb185-7"><a href="community-survey.html#cb185-7"></a><span class="st">  </span><span class="kw">separate</span>(<span class="dt">col =</span> category, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;maiprc&quot;</span>, <span class="st">&quot;place&quot;</span>, <span class="st">&quot;trimester&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb185-8"><a href="community-survey.html#cb185-8"></a><span class="st">  </span><span class="kw">plot_var</span>(<span class="dt">var =</span> value, <span class="dt">plot.unit =</span> plot.unit)<span class="op">+</span></span>
<span id="cb185-9"><a href="community-survey.html#cb185-9"></a><span class="st">  </span><span class="kw">facet_grid</span>(place <span class="op">~</span><span class="st"> </span>trimester)<span class="op">+</span></span>
<span id="cb185-10"><a href="community-survey.html#cb185-10"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="op">+</span></span>
<span id="cb185-11"><a href="community-survey.html#cb185-11"></a><span class="st">  </span><span class="kw">ggtitle</span>(title)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-169-1.png" width="672" /></p>
<p>Replace extreme values by NA</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="community-survey.html#cb186-1"></a>cmty_maiprc &lt;-<span class="st"> </span><span class="kw">modify_at</span>(<span class="dt">.x =</span> cmty_maiprc,</span>
<span id="cb186-2"><a href="community-survey.html#cb186-2"></a>                       <span class="dt">.at =</span> maiprc,</span>
<span id="cb186-3"><a href="community-survey.html#cb186-3"></a>                       <span class="dt">.f =</span> outlier_to_NA,</span>
<span id="cb186-4"><a href="community-survey.html#cb186-4"></a>                       <span class="dt">quantile =</span> <span class="fl">0.99</span>)</span></code></pre></div>
<p>and delete any community harbouring NA for any variable</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="community-survey.html#cb187-1"></a>del_NA &lt;-<span class="st"> </span>cmty_maiprc <span class="op">%&gt;%</span></span>
<span id="cb187-2"><a href="community-survey.html#cb187-2"></a><span class="st">  </span><span class="kw">map</span>(<span class="op">~</span><span class="st"> </span><span class="kw">which</span>(<span class="kw">is.na</span>(.x))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb187-3"><a href="community-survey.html#cb187-3"></a><span class="st">  </span><span class="kw">unlist</span>() <span class="op">%&gt;%</span></span>
<span id="cb187-4"><a href="community-survey.html#cb187-4"></a><span class="st">  </span><span class="kw">unique</span>()</span>
<span id="cb187-5"><a href="community-survey.html#cb187-5"></a>cmty_maiprc &lt;-<span class="st"> </span>cmty_maiprc[<span class="op">-</span>del_NA, ]</span></code></pre></div>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="community-survey.html#cb188-1"></a>plot.unit =<span class="st"> &quot;Tsh/kg&quot;</span></span>
<span id="cb188-2"><a href="community-survey.html#cb188-2"></a>title =<span class="st"> &quot;Maize price&quot;</span></span>
<span id="cb188-3"><a href="community-survey.html#cb188-3"></a>cmty_maiprc <span class="op">%&gt;%</span></span>
<span id="cb188-4"><a href="community-survey.html#cb188-4"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">all_of</span>(maiprc),</span>
<span id="cb188-5"><a href="community-survey.html#cb188-5"></a>               <span class="dt">names_to =</span> <span class="st">&quot;category&quot;</span>,</span>
<span id="cb188-6"><a href="community-survey.html#cb188-6"></a>               <span class="dt">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb188-7"><a href="community-survey.html#cb188-7"></a><span class="st">  </span><span class="kw">separate</span>(<span class="dt">col =</span> category, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;maiprc&quot;</span>, <span class="st">&quot;place&quot;</span>, <span class="st">&quot;trimester&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb188-8"><a href="community-survey.html#cb188-8"></a><span class="st">  </span><span class="kw">plot_var</span>(<span class="dt">var =</span> value, <span class="dt">plot.unit =</span> plot.unit)<span class="op">+</span></span>
<span id="cb188-9"><a href="community-survey.html#cb188-9"></a><span class="st">  </span><span class="kw">facet_grid</span>(place <span class="op">~</span><span class="st"> </span>trimester)<span class="op">+</span></span>
<span id="cb188-10"><a href="community-survey.html#cb188-10"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="op">+</span></span>
<span id="cb188-11"><a href="community-survey.html#cb188-11"></a><span class="st">  </span><span class="kw">ggtitle</span>(title)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-172-1.png" width="672" /></p>
</div>
<div id="fertilizer-prices" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Fertilizer prices</h2>
<div id="selected-variables" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Selected variables</h3>
<div id="standard-bag" class="section level4" number="4.4.1.1">
<h4><span class="header-section-number">4.4.1.1</span> Standard bag</h4>
<p>Cost in Tsh of a 50 kg bag of fertilizer from the nearest input dealer:</p>
<ul>
<li><code>fmkt_pri_bas</code>: basal fertlizer, (compound D). One of the most used fertlizer (cf:<a href="http://www.fao.org/3/a0395e/a0395e0a.htm" class="uri">http://www.fao.org/3/a0395e/a0395e0a.htm</a>).</li>
<li><code>fmkt_pri_top</code>: top-dressing fertilizer (urea).</li>
<li><code>fmkt_mkt_trp</code>: transport.</li>
</ul>
</div>
<div id="other-variables" class="section level4" number="4.4.1.2">
<h4><span class="header-section-number">4.4.1.2</span> Other variables</h4>
<p>Those variables do not relate to a fix amount of fertilizer.
They all start with the prefix <code>price</code>. The middle part is then a code for the type of input:</p>
<table>
<thead>
<tr class="header">
<th>code</th>
<th align="center">fertilizer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>fert1</td>
<td align="center">SA</td>
</tr>
<tr class="even">
<td>fert2</td>
<td align="center">DAP</td>
</tr>
<tr class="odd">
<td>fert3</td>
<td align="center">CAN</td>
</tr>
<tr class="even">
<td>fert4</td>
<td align="center">Urea</td>
</tr>
<tr class="odd">
<td>fert5</td>
<td align="center">TSP</td>
</tr>
<tr class="even">
<td>fert6</td>
<td align="center">MinjinguMazao</td>
</tr>
<tr class="odd">
<td>fert7</td>
<td align="center">YaraMilaCereal</td>
</tr>
<tr class="even">
<td>fert8</td>
<td align="center">YaraAmidas</td>
</tr>
<tr class="odd">
<td>fert9</td>
<td align="center">YaraMilaWinner</td>
</tr>
<tr class="even">
<td>fert10</td>
<td align="center">other</td>
</tr>
<tr class="odd">
<td>oinp1</td>
<td align="center">pesticide (for field use not storage)</td>
</tr>
<tr class="even">
<td>oinp2</td>
<td align="center">herbicide</td>
</tr>
<tr class="odd">
<td>oinp4</td>
<td align="center">fungicide</td>
</tr>
</tbody>
</table>
<p>Lastly, a suffix indicates the type of variable:</p>
<table>
<thead>
<tr class="header">
<th>suffix</th>
<th align="center">variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tsh</td>
<td align="center">price in Tsh</td>
</tr>
<tr class="even">
<td>amt</td>
<td align="center">amount</td>
</tr>
<tr class="odd">
<td>unit</td>
<td align="center">unit</td>
</tr>
</tbody>
</table>
<p>Example: <code>price_fert2_amt</code> amount of DAP, given in the unit indicated in <code>price_fert2_unit</code> and corresponding to the price in Tsh in <code>price_fert2_tsh</code>.</p>
</div>
</div>
<div id="subset-main-community-data.frame" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Subset main community data.frame</h3>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="community-survey.html#cb189-1"></a>cmty_fert &lt;-<span class="st"> </span>cmty <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb189-2"><a href="community-survey.html#cb189-2"></a><span class="st">  </span><span class="kw">select</span>(cmty_index, </span>
<span id="cb189-3"><a href="community-survey.html#cb189-3"></a>         <span class="kw">starts_with</span>(<span class="st">&quot;fmkt&quot;</span>),</span>
<span id="cb189-4"><a href="community-survey.html#cb189-4"></a>         <span class="kw">matches</span>(<span class="st">&quot;^price_oinp[^3]&quot;</span>),</span>
<span id="cb189-5"><a href="community-survey.html#cb189-5"></a>         <span class="kw">starts_with</span>(<span class="st">&quot;price_fert&quot;</span>))</span></code></pre></div>
<p>Any variables with negative values ?</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="community-survey.html#cb190-1"></a>cmty_fert <span class="op">%&gt;%</span></span>
<span id="cb190-2"><a href="community-survey.html#cb190-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>cmty_index) <span class="op">%&gt;%</span></span>
<span id="cb190-3"><a href="community-survey.html#cb190-3"></a><span class="st">  </span><span class="kw">any_negative</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;fmkt_pri_bas&quot;     &quot;fmkt_pri_top&quot;     &quot;fmkt_mkt_trp&quot;     &quot;price_oinp2_tsh&quot; 
##  [5] &quot;price_oinp1_tsh&quot;  &quot;price_oinp4_tsh&quot;  &quot;price_fert1_tsh&quot;  &quot;price_fert2_tsh&quot; 
##  [9] &quot;price_fert3_tsh&quot;  &quot;price_fert4_tsh&quot;  &quot;price_fert5_tsh&quot;  &quot;price_fert6_tsh&quot; 
## [13] &quot;price_fert7_tsh&quot;  &quot;price_fert8_tsh&quot;  &quot;price_fert9_tsh&quot;  &quot;price_fert9_amt&quot; 
## [17] &quot;price_fert10_tsh&quot;</code></pre>
<p>The value -98 seems to be the recurring place holder for missing value, sometimes it is also mislabelled as 98…</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="community-survey.html#cb192-1"></a>cmty_fert[<span class="kw">c</span>(<span class="dv">42</span>,<span class="dv">54</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">14</span>)]</span></code></pre></div>
<pre><code>##    cmty_index price_oinp2_tsh price_fert1_tsh
## 42         42             -98           60000
## 54         54             -98              98</code></pre>
<p>Replace those place holder values by NA.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="community-survey.html#cb194-1"></a>id_vars &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">&quot;cmty_index&quot;</span>, <span class="kw">colnames</span>(cmty_fert), <span class="dt">invert =</span> <span class="ot">TRUE</span>)</span>
<span id="cb194-2"><a href="community-survey.html#cb194-2"></a>err_to_NA &lt;-<span class="st"> </span><span class="kw">which</span>(cmty_fert[, id_vars ] <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">|</span><span class="st"> </span>cmty_fert[, id_vars] <span class="op">==</span><span class="st"> </span><span class="dv">98</span>, <span class="dt">arr.ind =</span> <span class="ot">TRUE</span>)</span>
<span id="cb194-3"><a href="community-survey.html#cb194-3"></a>cmty_fert[, id_vars][err_to_NA] &lt;-<span class="st"> </span><span class="ot">NA</span></span></code></pre></div>
</div>
<div id="calculate-price-in-tshkg-for-each-fertilizer" class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Calculate price in Tsh/kg for each fertilizer</h3>
<div id="transport-price-per-kg" class="section level4" number="4.4.3.1">
<h4><span class="header-section-number">4.4.3.1</span> Transport price per kg</h4>
<p>Transport price is assume to scale linearly with the amount being transported and is calculated by simply dividing the cost of transport of a 50kg fetlizer bag by 50.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="community-survey.html#cb195-1"></a>cmty_fert &lt;-<span class="st"> </span>cmty_fert <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">transp_price =</span> fmkt_mkt_trp <span class="op">/</span><span class="st"> </span><span class="dv">50</span>)</span></code></pre></div>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="community-survey.html#cb196-1"></a><span class="kw">plot_var</span>(cmty_fert, <span class="dt">var =</span> transp_price, <span class="dt">plot.unit =</span> <span class="st">&quot;Tsh/kg&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-178-1.png" width="672" /></p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="community-survey.html#cb197-1"></a>cmty_fert<span class="op">$</span>transp_price[cmty_fert<span class="op">$</span>transp_price <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span></code></pre></div>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="community-survey.html#cb198-1"></a><span class="kw">plot_var</span>(cmty_fert, <span class="dt">var =</span> transp_price, <span class="dt">plot.unit =</span> <span class="st">&quot;Tsh/kg&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-180-1.png" width="672" /></p>
</div>
<div id="price-tshkg" class="section level4" number="4.4.3.2">
<h4><span class="header-section-number">4.4.3.2</span> Price Tsh/kg</h4>
<p>Per unit category, per fertilizer type, calculate price in Tsh/kg as:</p>
<p><span class="math inline">\(Price_{(Tsh.kg^{-1})} = \frac{Price_{(Tsh)}}{amount_{(kg)}} + transport_{(Tsh.kg^{-1})}\)</span></p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="community-survey.html#cb199-1"></a>fertilizer &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;SA&quot;</span>, <span class="st">&quot;DAP&quot;</span>, <span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;Urea&quot;</span>, <span class="st">&quot;TSP&quot;</span>,</span>
<span id="cb199-2"><a href="community-survey.html#cb199-2"></a>                <span class="st">&quot;MinjinguMazao&quot;</span>, <span class="st">&quot;YaraMilaCereal&quot;</span>, <span class="st">&quot;YaraAmidas&quot;</span>, <span class="st">&quot;YaraMilaWinner&quot;</span>, <span class="st">&quot;other&quot;</span>)</span>
<span id="cb199-3"><a href="community-survey.html#cb199-3"></a>pesticide &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;pesticide&quot;</span>, <span class="st">&quot;herbicide&quot;</span>, <span class="ot">NA</span>, <span class="st">&quot;fungicide&quot;</span>)</span>
<span id="cb199-4"><a href="community-survey.html#cb199-4"></a>units &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">99</span>)</span></code></pre></div>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="community-survey.html#cb200-1"></a><span class="co"># Fertilizer</span></span>
<span id="cb200-2"><a href="community-survey.html#cb200-2"></a>cmty_fert &lt;-<span class="st"> </span><span class="kw">price_input</span>(<span class="dt">df =</span> cmty_fert,</span>
<span id="cb200-3"><a href="community-survey.html#cb200-3"></a>                         <span class="dt">input_type =</span> <span class="st">&quot;fert&quot;</span>,</span>
<span id="cb200-4"><a href="community-survey.html#cb200-4"></a>                         <span class="dt">input_id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,</span>
<span id="cb200-5"><a href="community-survey.html#cb200-5"></a>                         <span class="dt">input_name =</span> fertilizer,</span>
<span id="cb200-6"><a href="community-survey.html#cb200-6"></a>                         <span class="dt">units =</span> units)</span>
<span id="cb200-7"><a href="community-survey.html#cb200-7"></a><span class="co"># Pesticide </span></span>
<span id="cb200-8"><a href="community-survey.html#cb200-8"></a>cmty_fert &lt;-<span class="st"> </span><span class="kw">price_input</span>(<span class="dt">df =</span> cmty_fert,</span>
<span id="cb200-9"><a href="community-survey.html#cb200-9"></a>                         <span class="dt">input_type =</span> <span class="st">&quot;oinp&quot;</span>,</span>
<span id="cb200-10"><a href="community-survey.html#cb200-10"></a>                         <span class="dt">input_id =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>),</span>
<span id="cb200-11"><a href="community-survey.html#cb200-11"></a>                         <span class="dt">input_name =</span> pesticide,</span>
<span id="cb200-12"><a href="community-survey.html#cb200-12"></a>                         <span class="dt">units =</span> units)</span></code></pre></div>
</div>
<div id="keep-only-transformed-variables" class="section level4" number="4.4.3.3">
<h4><span class="header-section-number">4.4.3.3</span> Keep only transformed variables</h4>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="community-survey.html#cb201-1"></a>cmty_fert &lt;-<span class="st"> </span>cmty_fert <span class="op">%&gt;%</span></span>
<span id="cb201-2"><a href="community-survey.html#cb201-2"></a><span class="st">  </span><span class="kw">select</span>(cmty_index, fmkt_pri_bas, fmkt_pri_top, transp_price,</span>
<span id="cb201-3"><a href="community-survey.html#cb201-3"></a>         <span class="kw">paste0</span>(<span class="st">&quot;price_&quot;</span>, pesticide[<span class="op">!</span><span class="kw">is.na</span>(pesticide)]),</span>
<span id="cb201-4"><a href="community-survey.html#cb201-4"></a>         <span class="kw">paste0</span>(<span class="st">&quot;price_&quot;</span>, fertilizer))</span></code></pre></div>
<p>Rename standard bag variables (<code>fmkt</code>)</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="community-survey.html#cb202-1"></a><span class="kw">colnames</span>(cmty_fert)[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;price_basfert&quot;</span>, <span class="st">&quot;price_topfert&quot;</span>)</span></code></pre></div>
<p>Convert those in price per kg</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="community-survey.html#cb203-1"></a>cmty_fert &lt;-<span class="st"> </span>cmty_fert <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb203-2"><a href="community-survey.html#cb203-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">price_basfert =</span> price_basfert <span class="op">/</span><span class="st"> </span><span class="dv">50</span>,</span>
<span id="cb203-3"><a href="community-survey.html#cb203-3"></a>         <span class="dt">price_topfert =</span> price_topfert <span class="op">/</span><span class="st"> </span><span class="dv">50</span>)</span></code></pre></div>
</div>
<div id="visual-exploration" class="section level4" number="4.4.3.4">
<h4><span class="header-section-number">4.4.3.4</span> Visual exploration</h4>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="community-survey.html#cb204-1"></a><span class="kw">plot_var_facet</span>(cmty_fert, </span>
<span id="cb204-2"><a href="community-survey.html#cb204-2"></a>               <span class="dt">vars =</span> <span class="kw">c</span>(<span class="st">&quot;price_basfert&quot;</span>, <span class="st">&quot;price_topfert&quot;</span>), </span>
<span id="cb204-3"><a href="community-survey.html#cb204-3"></a>               <span class="dt">plot.unit =</span> <span class="st">&quot;Tsh/kg&quot;</span>, </span>
<span id="cb204-4"><a href="community-survey.html#cb204-4"></a>               <span class="dt">title =</span> <span class="st">&quot;Price base and top fertilizers&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-186-1.png" width="672" /></p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="community-survey.html#cb205-1"></a>var_fert &lt;-<span class="st"> </span><span class="kw">map</span>(fertilizer, <span class="op">~</span><span class="st"> </span><span class="kw">grep</span>(.x, <span class="kw">colnames</span>(cmty_fert), <span class="dt">value =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unlist</span>()</span>
<span id="cb205-2"><a href="community-survey.html#cb205-2"></a><span class="kw">plot_var_facet</span>(cmty_fert, </span>
<span id="cb205-3"><a href="community-survey.html#cb205-3"></a>               <span class="dt">vars =</span> var_fert, </span>
<span id="cb205-4"><a href="community-survey.html#cb205-4"></a>               <span class="dt">plot.unit =</span> <span class="st">&quot;Tsh/kg&quot;</span>, </span>
<span id="cb205-5"><a href="community-survey.html#cb205-5"></a>               <span class="dt">title =</span> <span class="st">&quot;Price fertilizers&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-187-1.png" width="672" /></p>
<p><code>price_TSP</code>, all NA ?: <code>TRUE</code>.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="community-survey.html#cb206-1"></a>cmty <span class="op">%&gt;%</span></span>
<span id="cb206-2"><a href="community-survey.html#cb206-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;price_fert5&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb206-3"><a href="community-survey.html#cb206-3"></a><span class="st">  </span><span class="kw">head</span>()</span></code></pre></div>
<pre><code>##   price_fert5_tsh price_fert5_amt price_fert5_unit
## 1             -98               1                3
## 2             -98               1                3
## 3             -98               1                3
## 4             -98               1                3
## 5             -98               1                3
## 6             -98               1                3</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="community-survey.html#cb208-1"></a><span class="kw">table</span>(cmty<span class="op">$</span>price_fert5_tsh)</span></code></pre></div>
<pre><code>## 
##   -98 50000 
##    66     1</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="community-survey.html#cb210-1"></a>var_pest &lt;-<span class="st"> </span><span class="kw">map_chr</span>(pesticide[<span class="op">!</span><span class="kw">is.na</span>(pesticide)], </span>
<span id="cb210-2"><a href="community-survey.html#cb210-2"></a>                    <span class="op">~</span><span class="st"> </span><span class="kw">grep</span>(.x, <span class="kw">colnames</span>(cmty_fert), <span class="dt">value =</span> <span class="ot">TRUE</span>))</span>
<span id="cb210-3"><a href="community-survey.html#cb210-3"></a><span class="kw">plot_var_facet</span>(cmty_fert, </span>
<span id="cb210-4"><a href="community-survey.html#cb210-4"></a>               <span class="dt">vars =</span> var_pest, </span>
<span id="cb210-5"><a href="community-survey.html#cb210-5"></a>               <span class="dt">plot.unit =</span> <span class="st">&quot;Tsh/kg&quot;</span>, </span>
<span id="cb210-6"><a href="community-survey.html#cb210-6"></a>               <span class="dt">title =</span> <span class="st">&quot;Price inputs other than fertilizers&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-190-1.png" width="672" /></p>
</div>
</div>
<div id="price-of-n-p-and-k-in-tsh.kg-1" class="section level3" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Price of N, P and K in <span class="math inline">\(Tsh.kg^{-1}\)</span></h3>
<p>We now calculate the price of fertilizer by isotopes, namely N, P and K. This price corresponds to the price of a given raw isotope in <span class="math inline">\(Tsh.kg^{-1}\)</span>. We do not take into account the difference in terms of availability of N, P and K per fertilizer type.</p>
<p>Modified input names in dedicatd dictionary (<code>dics$inp</code>) so that they match community data names.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="community-survey.html#cb211-1"></a><span class="kw">str_remove</span>(dics<span class="op">$</span>inp<span class="op">$</span>input, <span class="st">&quot;(</span><span class="ch">\\</span><span class="st">(.*</span><span class="ch">\\</span><span class="st">))&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb211-2"><a href="community-survey.html#cb211-2"></a><span class="st">  </span><span class="kw">str_remove</span>(<span class="st">&quot; &quot;</span>) -&gt;<span class="st"> </span>dics<span class="op">$</span>inp<span class="op">$</span>input_mod</span></code></pre></div>
<p>Temporarily transform <code>cmty_fert</code> to long format to be able to join it with <code>dics$inp</code> and perform calculations.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="community-survey.html#cb212-1"></a>cmty_fert_l &lt;-<span class="st"> </span>cmty_fert <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb212-2"><a href="community-survey.html#cb212-2"></a><span class="st">  </span><span class="kw">select</span>(cmty_index, <span class="kw">starts_with</span>(<span class="st">&quot;price&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb212-3"><a href="community-survey.html#cb212-3"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">str_subset</span>(<span class="kw">colnames</span>(cmty_fert), <span class="st">&quot;^price&quot;</span>), </span>
<span id="cb212-4"><a href="community-survey.html#cb212-4"></a>               <span class="dt">names_to =</span> <span class="st">&quot;input&quot;</span>, </span>
<span id="cb212-5"><a href="community-survey.html#cb212-5"></a>               <span class="dt">values_to =</span> <span class="st">&quot;price&quot;</span>)</span>
<span id="cb212-6"><a href="community-survey.html#cb212-6"></a>cmty_fert_l<span class="op">$</span>input &lt;-<span class="st"> </span><span class="kw">str_extract</span>(cmty_fert_l<span class="op">$</span>input, <span class="st">&quot;(?&lt;=price_).*&quot;</span>)</span></code></pre></div>
<p>Perform calculation and transform back to wider format <code>cmty_fert</code>.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="community-survey.html#cb213-1"></a>cmty_fert_l &lt;-<span class="st"> </span>cmty_fert_l <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">full_join</span>(dics<span class="op">$</span>inp, </span>
<span id="cb213-2"><a href="community-survey.html#cb213-2"></a>                                         <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;input&quot;</span> =<span class="st"> &quot;input_mod&quot;</span>), </span>
<span id="cb213-3"><a href="community-survey.html#cb213-3"></a>                                         <span class="dt">suffix =</span> <span class="kw">c</span>(<span class="st">&quot;.x&quot;</span>, <span class="st">&quot;.dic&quot;</span>))</span></code></pre></div>
<p>Define function to divide fertilizer price by concentration only if the concentration of a given isotope is different from 0.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="community-survey.html#cb214-1"></a>isotope_price &lt;-<span class="st"> </span><span class="cf">function</span>(price, conc){</span>
<span id="cb214-2"><a href="community-survey.html#cb214-2"></a>  <span class="kw">map2_dbl</span>(<span class="dt">.x =</span> price, <span class="dt">.y =</span> conc, <span class="cf">function</span>(.x, .y){ <span class="kw">ifelse</span>(.y <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>, .x<span class="op">/</span>.y, <span class="ot">NA</span>)})</span>
<span id="cb214-3"><a href="community-survey.html#cb214-3"></a>}</span></code></pre></div>
<p>Calculate price per isotope.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="community-survey.html#cb215-1"></a>cmty_fert_l &lt;-<span class="st"> </span>cmty_fert_l <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">N_price =</span> <span class="kw">isotope_price</span>(price, Nconc), </span>
<span id="cb215-2"><a href="community-survey.html#cb215-2"></a>                                      <span class="dt">P_price =</span> <span class="kw">isotope_price</span>(price, Pconc),</span>
<span id="cb215-3"><a href="community-survey.html#cb215-3"></a>                                      <span class="dt">K_price =</span> <span class="kw">isotope_price</span>(price, Kconc))</span></code></pre></div>
<p>Convert to wider format.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="community-survey.html#cb216-1"></a>cmty_fert_NPK &lt;-<span class="st"> </span>cmty_fert_l <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb216-2"><a href="community-survey.html#cb216-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> <span class="st">&quot;input&quot;</span>, <span class="dt">values_from =</span> <span class="st">&#39;price&#39;</span>)<span class="op">%&gt;%</span></span>
<span id="cb216-3"><a href="community-survey.html#cb216-3"></a><span class="st">  </span><span class="kw">select</span>(cmty_index, input.dic, <span class="kw">matches</span>(<span class="st">&quot;^[A-Z]_price$&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb216-4"><a href="community-survey.html#cb216-4"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">input_type =</span> input.dic)</span></code></pre></div>
<p>Delete rows without any input or isotope price.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="community-survey.html#cb217-1"></a>cmty_fert_NPK &lt;-<span class="st"> </span>cmty_fert_NPK[<span class="kw">rowSums</span>(<span class="kw">is.na</span>(cmty_fert_NPK)) <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>, ]</span></code></pre></div>
<p>Plot results.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="community-survey.html#cb218-1"></a>dNPK &lt;-<span class="st"> </span><span class="kw">pivot_longer</span>(cmty_fert_NPK, <span class="dt">cols =</span> <span class="kw">paste0</span>(<span class="kw">c</span>(<span class="st">&quot;N&quot;</span>, <span class="st">&quot;P&quot;</span>, <span class="st">&quot;K&quot;</span>), <span class="st">&quot;_price&quot;</span>),</span>
<span id="cb218-2"><a href="community-survey.html#cb218-2"></a>                     <span class="dt">names_to =</span> <span class="st">&quot;category&quot;</span>,</span>
<span id="cb218-3"><a href="community-survey.html#cb218-3"></a>                     <span class="dt">values_to =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb218-4"><a href="community-survey.html#cb218-4"></a>dNPK<span class="op">$</span>category &lt;-<span class="st"> </span><span class="kw">factor</span>(dNPK<span class="op">$</span>category, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;N_price&quot;</span>, <span class="st">&quot;P_price&quot;</span>, <span class="st">&quot;K_price&quot;</span>))</span>
<span id="cb218-5"><a href="community-survey.html#cb218-5"></a><span class="kw">plot_var</span>(dNPK, <span class="dt">var =</span> value, <span class="dt">plot.unit =</span> plot.unit)<span class="op">+</span></span>
<span id="cb218-6"><a href="community-survey.html#cb218-6"></a><span class="st">  </span><span class="kw">facet_wrap</span>(. <span class="op">~</span><span class="st"> </span>category)<span class="op">+</span></span>
<span id="cb218-7"><a href="community-survey.html#cb218-7"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>)<span class="op">+</span></span>
<span id="cb218-8"><a href="community-survey.html#cb218-8"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Fertilizer price per isotope: N, P and K&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-198-1.png" width="672" /></p>
</div>
</div>
<div id="labour-cost" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Labour cost</h2>
<p>Cost of hiring one adult man for one labour day.</p>
<p><strong>Labour variables:</strong></p>
<ul>
<li>prefix: <code>labprc</code>.</li>
<li>code: <code>clearing</code>, <code>hoeing</code>, <code>planting</code>, <code>tillplnt</code>, <code>fertapp</code>, <code>weeding</code>, <code>pestapp</code>, <code>harvesting</code>, <code>shelling</code>, pretty transparent except <code>tillplant</code> = tilling and planting together.</li>
<li>suffix: <code>price</code>.</li>
</ul>
<div id="subset-main-community-data.frame-1" class="section level3" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Subset main community data.frame</h3>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="community-survey.html#cb219-1"></a>cmty_labour &lt;-<span class="st"> </span>cmty <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb219-2"><a href="community-survey.html#cb219-2"></a><span class="st">  </span><span class="kw">select</span>(cmty_index, <span class="kw">matches</span>(<span class="st">&quot;^labprc_.*_price$&quot;</span>))</span></code></pre></div>
<p>Get rid of variable prefix.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="community-survey.html#cb220-1"></a><span class="kw">names</span>(cmty_labour) &lt;-<span class="st"> </span><span class="kw">str_replace</span>(<span class="kw">names</span>(cmty_labour), <span class="st">&quot;labprc_&quot;</span>, <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p>Get all labour variable names.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="community-survey.html#cb221-1"></a>lab_vars &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">&quot;_price$&quot;</span>, <span class="kw">colnames</span>(cmty_labour), <span class="dt">value =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>Any variables with negative values ?</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="community-survey.html#cb222-1"></a>cmty_labour[, lab_vars] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">any_negative</span>()</span></code></pre></div>
<pre><code>## [1] &quot;clearing_price&quot;   &quot;hoeing_price&quot;     &quot;planting_price&quot;   &quot;tillplnt_price&quot;  
## [5] &quot;fertapp_price&quot;    &quot;pestapp_price&quot;    &quot;harvesting_price&quot; &quot;shelling_price&quot;</code></pre>
<p>Replace negative values by NA.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="community-survey.html#cb224-1"></a>cmty_labour[, lab_vars] &lt;-<span class="st"> </span><span class="kw">modify</span>(cmty_labour[, lab_vars], <span class="op">~</span><span class="st"> </span><span class="kw">ifelse</span>(.x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, .x))</span></code></pre></div>
</div>
<div id="visual-exploration-1" class="section level3" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> Visual exploration</h3>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="community-survey.html#cb225-1"></a><span class="kw">plot_var_facet</span>(cmty_labour, </span>
<span id="cb225-2"><a href="community-survey.html#cb225-2"></a>               <span class="dt">vars =</span> lab_vars, </span>
<span id="cb225-3"><a href="community-survey.html#cb225-3"></a>               <span class="dt">plot.unit =</span> <span class="st">&quot;Tsh / work day&quot;</span>, </span>
<span id="cb225-4"><a href="community-survey.html#cb225-4"></a>               <span class="dt">title =</span> <span class="st">&quot;Community labour prices&quot;</span>) <span class="op">+</span></span>
<span id="cb225-5"><a href="community-survey.html#cb225-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">label_number_si</span>())</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-204-1.png" width="672" /></p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="community-survey.html#cb226-1"></a>cmty_labour &lt;-<span class="st"> </span><span class="kw">modify_at</span>(<span class="dt">.x =</span> cmty_labour,</span>
<span id="cb226-2"><a href="community-survey.html#cb226-2"></a>                         <span class="dt">.at =</span> lab_vars,</span>
<span id="cb226-3"><a href="community-survey.html#cb226-3"></a>                         <span class="dt">.f =</span> outlier_to_NA,</span>
<span id="cb226-4"><a href="community-survey.html#cb226-4"></a>                         <span class="dt">quantile =</span> <span class="fl">0.95</span>)</span></code></pre></div>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="community-survey.html#cb227-1"></a><span class="kw">plot_var_facet</span>(cmty_labour, </span>
<span id="cb227-2"><a href="community-survey.html#cb227-2"></a>               <span class="dt">vars =</span> lab_vars, </span>
<span id="cb227-3"><a href="community-survey.html#cb227-3"></a>               <span class="dt">plot.unit =</span> <span class="st">&quot;Tsh / work day&quot;</span>, </span>
<span id="cb227-4"><a href="community-survey.html#cb227-4"></a>               <span class="dt">title =</span> <span class="st">&quot;Community labour prices&quot;</span>) <span class="op">+</span></span>
<span id="cb227-5"><a href="community-survey.html#cb227-5"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">label_number_si</span>())</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-206-1.png" width="672" /></p>
</div>
</div>
<div id="merge" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Merge</h2>
<p>Merge together.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="community-survey.html#cb228-1"></a>community &lt;-<span class="st"> </span><span class="kw">reduce</span>(<span class="kw">list</span>(cmty_info, cmty_maiprc, cmty_fert, cmty_labour),</span>
<span id="cb228-2"><a href="community-survey.html#cb228-2"></a>                    inner_join,</span>
<span id="cb228-3"><a href="community-survey.html#cb228-3"></a>                    <span class="dt">by =</span> <span class="st">&quot;cmty_index&quot;</span>)</span></code></pre></div>
<p>Save intermediate dataset.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="community-survey.html#cb229-1"></a><span class="kw">write_csv</span>(<span class="dt">x =</span> community,</span>
<span id="cb229-2"><a href="community-survey.html#cb229-2"></a>          <span class="dt">path =</span> <span class="kw">here</span>(<span class="st">&quot;./data/extracted/community.csv&quot;</span>))</span></code></pre></div>
<p>Save separate dataset with fertilizers isotope prices.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="community-survey.html#cb230-1"></a>community_NPK &lt;-<span class="st"> </span><span class="kw">inner_join</span>(cmty_info, cmty_fert_NPK, <span class="dt">by =</span> <span class="st">&quot;cmty_index&quot;</span>)</span>
<span id="cb230-2"><a href="community-survey.html#cb230-2"></a><span class="kw">write_csv</span>(<span class="dt">x =</span> community_NPK,</span>
<span id="cb230-3"><a href="community-survey.html#cb230-3"></a>          <span class="dt">path =</span> <span class="kw">here</span>(<span class="st">&quot;./data/extracted/community_NPK.csv&quot;</span>))</span></code></pre></div>
</div>
<div id="recap" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Recap</h2>
<div id="community-general-dataset" class="section level3" number="4.7.1">
<h3><span class="header-section-number">4.7.1</span> Community general dataset</h3>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="community-survey.html#cb231-1"></a><span class="kw">read.csv</span>(<span class="kw">here</span>(<span class="st">&quot;./docs/tables/community_recap_tab.csv&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb231-2"><a href="community-survey.html#cb231-2"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="12%" />
<col width="67%" />
<col width="13%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
<th align="left">Unit</th>
<th align="left">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">cmty_index</td>
<td align="left">community index</td>
<td align="left">-</td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">enum_date</td>
<td align="left">survey date</td>
<td align="left">-</td>
<td align="left">date</td>
</tr>
<tr class="odd">
<td align="left">zone</td>
<td align="left">zone</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="even">
<td align="left">region</td>
<td align="left">region</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="odd">
<td align="left">district</td>
<td align="left">district</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="even">
<td align="left">site</td>
<td align="left">site</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="odd">
<td align="left">ward</td>
<td align="left">ward</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="even">
<td align="left">village</td>
<td align="left">village</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="odd">
<td align="left">hamlet</td>
<td align="left">hamlet</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="even">
<td align="left">comm_gps</td>
<td align="left">latitude and longitude of community</td>
<td align="left">-</td>
<td align="left">coordonates</td>
</tr>
<tr class="odd">
<td align="left">vil_nhh</td>
<td align="left">number of households in village</td>
<td align="left">-</td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">vil_npersons</td>
<td align="left">number of persons in village</td>
<td align="left">-</td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">vil_acres</td>
<td align="left">approximative village area</td>
<td align="left"><span class="math inline">\(acres\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">acc_inp_km</td>
<td align="left">distance to nearest input dealer</td>
<td align="left"><span class="math inline">\(km\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">acc_inp_tsh</td>
<td align="left">cost of transport to nearest input dealer</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">maiprc_depot_q1</td>
<td align="left">maize price per kg from large commercial depot for Apr-Jun 2016 (q1)</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">maiprc_depot_q2</td>
<td align="left">same for Jul-Sep 2016 (q2)</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">maiprc_depot_q3</td>
<td align="left">same for Oct-Dec 2016 (q3</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">maiprc_depot_q4</td>
<td align="left">same forJan-Mar 2017 (q4)</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">maiprc_town_q1</td>
<td align="left">maize price per kg from regular marketplace for Apr-Jun 2016 (q1)</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">maiprc_town_q2</td>
<td align="left">same for Jul-Sep 2016 (q2)</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">maiprc_town_q3</td>
<td align="left">same for Oct-Dec 2016 (q3</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">maiprc_town_q4</td>
<td align="left">same forJan-Mar 2017 (q4)</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">price_basfert</td>
<td align="left">price basal fertilizer (compound D) from nearest input dealer</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">price_topfert</td>
<td align="left">price top-dressing fertilizer (Urea) from nearest input dealer</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">transp_price</td>
<td align="left">transport cost per kg for fertilizer from the nearest input dealer to this village (price transport 50kg bag / 50)</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">price_pesticide</td>
<td align="left">price at peak demand (aug-dec) for different inputs.</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">price_herbicide</td>
<td align="left">Calculated as:</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">price_fungicide</td>
<td align="left">(Price / amount converted to kg) + transp_price</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">price_SA</td>
<td align="left">-</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">price_DAP</td>
<td align="left">-</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">price_CAN</td>
<td align="left">-</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">price_Urea</td>
<td align="left">-</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">price_TSP</td>
<td align="left">-</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">price_ MinjinguMazao</td>
<td align="left">-</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">price_YaraMilaCereal</td>
<td align="left">-</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">price_YaraAmidas</td>
<td align="left">-</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">price_YaraMilaWinner</td>
<td align="left">-</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">price_other</td>
<td align="left">-</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">clearing_price</td>
<td align="left">labour prices for different categories: clearing</td>
<td align="left"><span class="math inline">\(Tsh.work \, day^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">hoeing_price</td>
<td align="left">hoeing</td>
<td align="left"><span class="math inline">\(Tsh.work \, day^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">planting_price</td>
<td align="left">planting</td>
<td align="left"><span class="math inline">\(Tsh.work \, day^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">tillplnt_price</td>
<td align="left">tilling and planting combined</td>
<td align="left"><span class="math inline">\(Tsh.work \, day^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">fertapp_price</td>
<td align="left">fertilizer application</td>
<td align="left"><span class="math inline">\(Tsh.work \, day^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">weeding_price</td>
<td align="left">weeding</td>
<td align="left"><span class="math inline">\(Tsh.work \, day^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">pestapp_price</td>
<td align="left">pesticide application</td>
<td align="left"><span class="math inline">\(Tsh.work \, day^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">harvesting_price</td>
<td align="left">harvesting</td>
<td align="left"><span class="math inline">\(Tsh.work \, day^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">shelling_price</td>
<td align="left">shelling /treshing</td>
<td align="left"><span class="math inline">\(Tsh.work \, day^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
</tbody>
</table>
</div>
<div id="fertilizer-isotope-prices" class="section level3" number="4.7.2">
<h3><span class="header-section-number">4.7.2</span> Fertilizer isotope prices</h3>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="community-survey.html#cb232-1"></a><span class="kw">read.csv</span>(<span class="kw">here</span>(<span class="st">&quot;./docs/tables/community_NPK_recap_tab.csv&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb232-2"><a href="community-survey.html#cb232-2"></a><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="10%" />
<col width="67%" />
<col width="11%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
<th align="left">Unit</th>
<th align="left">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">cmty_index</td>
<td align="left">community index</td>
<td align="left">-</td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">enum_date</td>
<td align="left">survey date</td>
<td align="left">-</td>
<td align="left">date</td>
</tr>
<tr class="odd">
<td align="left">zone</td>
<td align="left">zone</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="even">
<td align="left">region</td>
<td align="left">region</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="odd">
<td align="left">district</td>
<td align="left">district</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="even">
<td align="left">site</td>
<td align="left">site</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="odd">
<td align="left">ward</td>
<td align="left">ward</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="even">
<td align="left">village</td>
<td align="left">village</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="odd">
<td align="left">hamlet</td>
<td align="left">hamlet</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="even">
<td align="left">comm_gps</td>
<td align="left">latitude and longitude of community</td>
<td align="left">-</td>
<td align="left">coordonates</td>
</tr>
<tr class="odd">
<td align="left">vil_nhh</td>
<td align="left">number of households in village</td>
<td align="left">-</td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">vil_npersons</td>
<td align="left">number of persons in village</td>
<td align="left">-</td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">vil_acres</td>
<td align="left">approximative village area</td>
<td align="left"><span class="math inline">\(acres\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">acc_inp_km</td>
<td align="left">distance to nearest input dealer</td>
<td align="left"><span class="math inline">\(km\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">acc_inp_tsh</td>
<td align="left">cost of transport to nearest input dealer</td>
<td align="left"><span class="math inline">\(Tsh\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">input_type</td>
<td align="left">type of fertilizer input that was used to calculate corresponding isotope price</td>
<td align="left">-</td>
<td align="left">character</td>
</tr>
<tr class="odd">
<td align="left">N_price</td>
<td align="left">price at peak demand (aug-dec) of Nitrogen</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">P_price</td>
<td align="left">price at peak demand (aug-dec) of Phosphorus</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
<tr class="odd">
<td align="left">K_price</td>
<td align="left">price at peak demand (aug-dec) of Potassium</td>
<td align="left"><span class="math inline">\(Tsh.kg^{-1}\)</span></td>
<td align="left">integer</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="focal-plot-survey.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="manual-latin-hypercube-sampling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
